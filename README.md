Описание задания

Реализован сервер, который принимает данные от клиентов через TCP-соединения, агрегирует их и предоставляет результаты через HTTP API. Используется только стандартная библиотека Go.

Функциональность

Прием данных через TCP: сервер принимает соединения на порту 8080. Клиенты могут отправлять текстовые строки в кодировке ASCII или UTF-8.

Агрегация данных: подсчитывается общее количество полученных строк и количество уникальных слов.

HTTP API для статистики: на порту 8081 доступен HTTP эндпоинт /stats, который возвращает текущую статистику в формате JSON.

Поддержка нескольких клиентов одновременно и корректное завершение работы сервера.

Cборка:

go build -o ddos-guard.exe cmd/server/main.go

Запуск сервера:

go run ./cmd/server/main.go

Запуск тестов:

go test ./...

Структура проекта:

cmd/server/main.go – точка входа
internal/domain – сущности и базовые модели (Stats, Message)
internal/repository – интерфейсы и реализация хранилища в памяти
internal/usecase – бизнес-логика (агрегация данных, работа со статистикой)
internal/transport/http – HTTP сервер и обработчики
internal/transport/tcp – TCP сервер и обработчики
internal/config – загрузка настроек из переменных окружения
internal/app – управление жизненным циклом приложения

Архитектурные решения

Разделение ответственности: каждый слой отвечает за свою область

domain – сущности и модели

repository – хранение данных

usecase – бизнес-логика

transport – сетевые интерфейсы (HTTP/TCP)

Стандартная структура Go: cmd/ для точки входа и internal/ для реализации

Потокобезопасность с помощью sync.RWMutex

Корректное завершение работы через контексты и sync.WaitGroup

Тестируемость: каждый слой можно тестировать изолированно

Чистая архитектура для легкого расширения и поддержки

API

TCP (порт 8080)

Принимает текстовые данные от клиентов.

HTTP (порт 8081)

GET /stats – возвращает статистику в формате JSON:
GET /health – возвращает информацию о статусе сервиса
